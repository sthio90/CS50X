{% extends "layout.html" %}

{% block title %}
    Crypto
{% endblock %}

{% block main %}
    <h2>Cryptocurrency Data</h2>
    <form action="/crypto" method="post">
        <input type="text" name="symbol" placeholder="Enter crypto symbol (e.g., BTC)">
        <button type="submit">Get Price</button>
    </form>

    {% if symbol %}
        <div>
            <p>The current price of {{ symbol }} is: {{ crypto_price }}</p>
        </div>
        <!-- Canvas for Chart.js graph -->
        <canvas id="myChart"></canvas>

        <script>
            var ctx = document.getElementById('myChart').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: {{ date_labels | tojson }},
                    datasets: [{
                        label: 'Price',
                        data: {{ price_data | tojson }},
                        backgroundColor: 'rgba(0, 123, 255, 0.5)',
                        borderColor: 'rgba(0, 123, 255, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: false
                        }
                    }
                }
            });
        </script>
    {% endif %}
{% endblock %}
